<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing - Income Goal Calculator | AcquisitionPRO®</title>
    <meta name="description" content="Choose your plan for professional CRE activity tracking and goal management. Monthly, yearly, or lifetime access available.">
    <meta name="keywords" content="CRE, commercial real estate, activity tracking, pricing, subscription">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/png" href="/images/favicon.png">
    <link rel="apple-touch-icon" href="/images/icon.png">
    <link rel="manifest" href="/manifest.json">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css?v=1.2">
    <link rel="stylesheet" href="/css/marketing.css?v=1.2">
    
    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Authentication -->
    <script src="/js/auth.js"></script>
    
    <!-- Iframe Detection -->
    <script src="/js/iframe-detector.js"></script>
</head>
<body>
    <!-- Marketing Header -->
    <header class="marketing-header">
        <div class="container">
            <nav class="marketing-nav">
                <div class="marketing-brand">
                    <img src="/images/logo.png" alt="AcquisitionPRO® Logo" class="marketing-logo">
                </div>
                <ul class="marketing-nav-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/calculator">Free Calculator</a></li>
                    <li><a href="/pricing">Pricing</a></li>
                </ul>
                <div class="marketing-nav-cta" id="navCta">
                    <a href="/login" class="btn btn-outline btn-small">Login</a>
                    <a href="/register" class="btn btn-primary btn-small">Get Started</a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Page Title Section -->
    <section class="page-title-section">
        <div class="container">
            <h1 class="page-title">Pricing Plans</h1>
        </div>
    </section>


    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="text-center">The Calculator's Free. The Tracker Makes You Unstoppable.</h2>
            <p class="text-center section-subtitle">For Less Than A Coffee At Starbucks® A Week, Track Your Outreach Daily And Hit Your Income Goals With Ease</p>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--secondary-blue)" stroke-width="2">
                            <rect x="3" y="5" width="6" height="6" rx="1"></rect>
                            <path d="m5 12 2 2 4-4"></path>
                            <path d="M13 6h8"></path>
                            <path d="M13 12h8"></path>
                            <path d="M13 18h8"></path>
                        </svg>
                    </div>
                    <h3>PRO: Daily Accountability</h3>
                    <p>Log the contact attempts you made today, see your gap, finish the day hitting your goals.</p>
                    <div class="feature-highlight feature-pro">Pro Feature: Daily Activity Logging and Tracking</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent-yellow)" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                            <path d="M8 14h.01"></path>
                            <path d="M12 14h.01"></path>
                            <path d="M16 14h.01"></path>
                            <path d="M8 18h.01"></path>
                            <path d="M12 18h.01"></path>
                        </svg>
                    </div>
                    <h3>PRO: Earn Your Weekend</h3>
                    <p>Know exactly how many calls you still need by Friday. Hit your number. Enjoy guilt-free time with family.</p>
                    <div class="feature-highlight feature-pro">Pro Feature: Weekly Progress Tracking</div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--primary-navy)" stroke-width="2">
                            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                            <path d="M4 22h16"></path>
                            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                            <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"></path>
                        </svg>
                    </div>
                    <h3>PRO: Winner's Advantage</h3>
                    <p>Discover your peak performance patterns. Close more deals by knowing when you're unstoppable.</p>
                    <div class="feature-highlight feature-pro">Pro Feature: Weekly Performance insights</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Preview Section -->
    <section class="pricing-preview" id="pricing">
        <div class="container">
            <h2 class="text-center">Start with Free Calculator. Upgrade When Ready.</h2>
            <div class="pricing-cards">
                <div class="pricing-card">
                    <h3>Monthly Pro</h3>
                    <div class="price">$19<span>/month</span></div>
                    <ul class="features-list">
                        <li>✅ Free Calculator Access</li>
                        <li>✅ Daily Activity Tracking</li>
                        <li>✅ Progress Dashboard</li>
                        <li>✅ Historical Data & Trends</li>
                        <li>✅ Performance Analytics</li>
                    </ul>
                    <button onclick="startCheckout('monthly')" class="btn btn-outline">Start Tracking Now</button>
                </div>
                <div class="pricing-card featured">
                    <div class="popular-badge">Most Popular</div>
                    <h3>Annual Pro</h3>
                    <div class="price">$189<span>/year</span></div>
                    <ul class="features-list">
                        <li>✅ Everything in Monthly</li>
                        <li>✅ 2 Months Free</li>
                        <li>✅ Priority Support</li>
                        <li>✅ Advanced Analytics</li>
                        <li>✅ Export Data</li>
                    </ul>
                    <button onclick="startCheckout('yearly')" class="btn btn-accent">Start Tracking Now</button>
                </div>
                <div class="pricing-card">
                    <h3>Lifetime Pro</h3>
                    <div class="price">$297<span>/once</span></div>
                    <ul class="features-list">
                        <li>✅ Everything in Annual</li>
                        <li>✅ Lifetime Access</li>
                        <li>✅ All Future Updates</li>
                        <li>✅ VIP Support</li>
                        <li>✅ Beta Feature Access</li>
                    </ul>
                    <button onclick="startCheckout('lifetime')" class="btn btn-outline">Start Tracking Now</button>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta" style="padding: var(--spacing-lg) 0;">
        <div class="container">
            <h2>30-Day Money Back Guarantee</h2>
            <p>Not satisfied? Get a full refund within 30 days, no questions asked.</p>
        </div>
    </section>

    <!-- Marketing Footer -->
    <footer class="marketing-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="/images/logo.png" alt="AcquisitionPRO® Logo" class="footer-logo">
                    <p>The #1 commercial real estate goal calculator and activity tracker for brokers and investors.</p>
                </div>
                <div class="footer-links">
                    <h4>Product</h4>
                    <ul>
                        <li><a href="/register">Free Calculator</a></li>
                        <li><a href="#pricing">Pricing</a></li>
                        <li><a href="#features">Features</a></li>
                    </ul>
                </div>
                <div class="footer-links">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="https://goacquisitionpro.com/privacy-policy" target="_blank">Privacy Policy</a></li>
                        <li><a href="https://goacquisitionpro.com/terms-conditions" target="_blank">Terms & Conditions</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>©2025 AcquisitionPRO® - All Rights Reserved | 853 Dauphin St Suite C Mobile, AL 36602</p>
            </div>
        </div>
    </footer>

    <!-- Vimeo Player API -->
    <script src="https://player.vimeo.com/api/player.js"></script>
    
    <!-- Video Player JavaScript -->
    <script>
        // Update navigation based on authentication status
        function updateNavigationForAuth() {
            console.log('🔍 Checking authentication status for navigation update');
            
            const navCta = document.getElementById('navCta');
            if (!navCta) return;
            
            // Wait for auth manager to be available and initialized
            const checkAuth = () => {
                if (window.authManager && window.authManager.isAuthenticated()) {
                    console.log('✅ User authenticated, updating navigation to show authenticated state');
                    
                    // Replace login/register buttons with authenticated navigation
                    navCta.innerHTML = `
                        <a href="/app" class="btn btn-outline btn-small">Dashboard</a>
                        <a href="/profile" class="btn btn-primary btn-small">Profile</a>
                    `;
                } else {
                    console.log('ℹ️ User not authenticated, showing login/register buttons');
                    
                    // Keep default login/register buttons
                    navCta.innerHTML = `
                        <a href="/login" class="btn btn-outline btn-small">Login</a>
                        <a href="/register" class="btn btn-primary btn-small">Get Started</a>
                    `;
                }
            };
            
            // Check immediately if auth manager is available
            if (window.authManager) {
                checkAuth();
            } else {
                // Wait for auth manager to initialize
                setTimeout(() => {
                    checkAuth();
                }, 500);
            }
        }
        
        // Video player functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Update navigation based on authentication status
            updateNavigationForAuth();
            
            const videoPlaceholder = document.getElementById('heroVideo');
            const placeholderContent = document.getElementById('videoPlaceholderContent');
            const vimeoEmbed = document.getElementById('vimeoEmbed');
            const vimeoIframe = document.getElementById('vimeoIframe');
            
            console.log('Video elements found:', {
                placeholder: !!videoPlaceholder,
                content: !!placeholderContent,
                embed: !!vimeoEmbed,
                iframe: !!vimeoIframe
            });
            
            // Add iframe event listeners
            if (vimeoIframe) {
                vimeoIframe.addEventListener('load', function() {
                    console.log('✅ Vimeo iframe loaded successfully');
                });
                
                vimeoIframe.addEventListener('error', function() {
                    console.error('❌ Vimeo iframe failed to load');
                });
            }
            
            // Handle video placeholder click
            if (videoPlaceholder) {
                videoPlaceholder.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('🎬 Video placeholder clicked');
                    
                    try {
                        // Hide placeholder and show Vimeo embed
                        if (placeholderContent && vimeoEmbed) {
                            placeholderContent.style.display = 'none';
                            vimeoEmbed.style.display = 'block';
                            
                            console.log('✅ Video embed shown successfully');
                        }
                        
                        // Track video play event
                        if (typeof gtag !== 'undefined') {
                            gtag('event', 'play', {
                                event_category: 'Video',
                                event_label: 'Hero Demo Video'
                            });
                        }
                    } catch (error) {
                        console.error('❌ Error showing video:', error);
                    }
                });
            }
        });

        // Stripe Checkout Function
        async function startCheckout(planType) {
            try {
                console.log('Starting checkout for plan:', planType);
                
                // Show loading state
                const button = event.target;
                const originalText = button.textContent;
                button.textContent = 'Processing...';
                button.disabled = true;
                
                // Check authentication status to determine checkout endpoint
                const isAuthenticated = window.authManager && window.authManager.isAuthenticated();
                const checkoutEndpoint = isAuthenticated ? '/api/subscriptions/checkout' : '/api/subscriptions/guest-checkout';
                
                console.log('User authenticated:', isAuthenticated);
                console.log('Using checkout endpoint:', checkoutEndpoint);
                
                // Prepare request options
                const requestOptions = {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ planType })
                };
                
                // Add authorization header for authenticated users
                if (isAuthenticated) {
                    const accessToken = window.authManager.getAccessToken();
                    if (accessToken) {
                        requestOptions.headers['Authorization'] = `Bearer ${accessToken}`;
                    }
                }
                
                const response = await fetch(checkoutEndpoint, requestOptions);
                
                const data = await response.json();
                
                if (data.success && data.checkoutUrl) {
                    // Redirect to Stripe Checkout
                    window.location.href = data.checkoutUrl;
                } else {
                    throw new Error(data.error || 'Checkout failed');
                }
                
            } catch (error) {
                console.error('Checkout error:', error);
                alert('Unable to start checkout. Please try again.');
                
                // Reset button
                if (button) {
                    button.textContent = originalText;
                    button.disabled = false;
                }
            }
        }
    </script>
</body>
</html>